**Prompt:**
in zsh, trap each error in the current terminal session. save the command that triggered it to suitable global var, and save the error/output text to another global var


**Response:**
Below is an implementation using ZSH. Here we are using `TRAPZERR` function which gets invoked on error.

```bash
TRAPZERR() { 
    COMMAND_THAT_CAUSED_ERROR="${(z)1}" 
    ERROR_TEXT="${2}" 
}
```

In the above code snippet:

- `TRAPZERR` function is invoked whenever an error occurs.
- `(z)1` is the command that triggered the error.
- `2` is the error message.

<details><summary>Metadata</summary>

- Duration: 8007 ms
- Datetime: 2023-08-27T10:14:35.303356
- Model: gpt-4-0613

</details>

**Options:**
```json
{}
```

