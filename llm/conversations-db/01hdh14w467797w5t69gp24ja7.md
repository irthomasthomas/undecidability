**Prompt:**
(define-command-global pipe-selection-title-url ()
    (let* ((title (title (current-buffer)))
          (url (url (current-buffer)))
          (selection (ps-eval (ps:chain window (get-selection) (to-string))))
          (pipe-title "/tmp/nyxt_title")
          (pipe-url "/tmp/nyxt_url")
          (pipe-selection "/tmp/nyxt_selection"))
        (uiop:launch-program
            (list "sh" "-c"
                  (concatenate 'string
                              "echo " "'" title "' > " pipe-title "
echo " "'" url "' > " pipe-url "
echo " "'" selection "' > " pipe-selection)))))

Warning: Error on separate thread: The value
  #&lt;QURI.URI.HTTP:URI-HTTPS https://github.com/irthomasthomas&gt;
is not of type
  SEQUENCE

**Response:**
The error message suggests that the value being passed to the `url` function in the `let*` block is not of the expected type. Specifically, it is expecting a sequence, but the actual value being passed is `#&lt;QURI.URI.HTTP:URI-HTTPS https://github.com/irthomasthomas&gt;`.

To fix this issue, you can try using the `uri-string` function from the `quri` library to extract the URL string from the URI object. Here's an updated version of the code:

```lisp
(define-command-global pipe-selection-title-url ()
  (let* ((title (title (current-buffer)))
         (uri (url (current-buffer)))
         (url-string (quri:uri-string uri))
         (selection (ps-eval (ps:chain window (get-selection) (to-string))))
         (pipe-title "/tmp/nyxt_title")
         (pipe-url "/tmp/nyxt_url")
         (pipe-selection "/tmp/nyxt_selection"))
    (uiop:launch-program
     (list "sh" "-c"
           (concatenate 'string
                        "echo " "'" title "' > " pipe-title "
echo " "'" url-string "' > " pipe-url "
echo " "'" selection "' > " pipe-selection))))))
```

In this updated code, we use the `quri:uri-string` function to convert the URI object to a string before passing it to the `echo` command.

<details><summary>Metadata</summary>

- Duration: 24088 ms
- Datetime: 2023-10-24T14:23:53.453663
- Model: gpt-3.5-turbo-0613

</details>

**Options:**
```json
{}
```

**Prompt:**
Warning: Error on separate thread: The variable URL is unbound.

**Response:**
Apologies for the oversight in the previous response. It seems that the `url` variable is not properly defined in the code. To fix this issue, you can use the `web-buffer-url` function instead of `url` to retrieve the URL of the current buffer. Here's the updated code:

```lisp
(define-command-global pipe-selection-title-url ()
  (let* ((title (title (current-buffer)))
         (url (web-buffer-url (current-buffer)))
         (selection (ps-eval (ps:chain window (get-selection) (to-string))))
         (pipe-title "/tmp/nyxt_title")
         (pipe-url "/tmp/nyxt_url")
         (pipe-selection "/tmp/nyxt_selection"))
    (uiop:launch-program
     (list "sh" "-c"
           (concatenate 'string
                        "echo " "'" title "' > " pipe-title "
echo " "'" url "' > " pipe-url "
echo " "'" selection "' > " pipe-selection))))))
```

In this updated code, we use the `web-buffer-url` function instead of `url` to get the URL of the current buffer. This should resolve the issue and properly bind the `url` variable.

<details><summary>Metadata</summary>

- Duration: 20192 ms
- Datetime: 2023-10-24T14:41:00.435533
- Model: gpt-3.5-turbo-0613

</details>

**Options:**
```json
{}
```

**Prompt:**
(render-url (url (current-buffer))

**Response:**
To render the URL of the current buffer, you can use the `render-url` function with the `(url (current-buffer))` expression. Here's the correct code:

```lisp
(render-url (url (current-buffer)))
```

This code will evaluate the `(url (current-buffer))` expression to get the URL of the current buffer, and then pass that URL to the `render-url` function. This should render the URL in the desired format.

<details><summary>Metadata</summary>

- Duration: 10739 ms
- Datetime: 2023-10-24T14:42:32.450106
- Model: gpt-3.5-turbo-0613

</details>

**Options:**
```json
{}
```

**Prompt:**
rewrite the whole function.

**Response:**
Certainly! Here's a revised version of the `pipe-selection-title-url` function that retrieves the title, URL, and selection of the current buffer and pipes them to specific files:

```lisp
(define-command-global pipe-selection-title-url ()
  (let* ((title (title (current-buffer)))
         (url (web-buffer-url (current-buffer)))
         (selection (ps-eval (ps:chain window (get-selection) (to-string))))
         (pipe-title "/tmp/nyxt_title")
         (pipe-url "/tmp/nyxt_url")
         (pipe-selection "/tmp/nyxt_selection"))
    (with-open-file (stream pipe-title
                           :direction :output
                           :if-exists :supersede
                           :if-does-not-exist :create)
      (write-string title stream))
    (with-open-file (stream pipe-url
                           :direction :output
                           :if-exists :supersede
                           :if-does-not-exist :create)
      (write-string url stream))
    (with-open-file (stream pipe-selection
                           :direction :output
                           :if-exists :supersede
                           :if-does-not-exist :create)
      (write-string selection stream))))

```

In this revised version, the function retrieves the title, URL, and selection of the current buffer using the `title`, `web-buffer-url`, and `get-selection` functions respectively. It then creates the necessary pipe file paths (`pipe-title`, `pipe-url`, `pipe-selection`) and opens each file in the desired mode using `with-open-file`. Finally, it writes the respective values (title, URL, selection) to their corresponding files using `write-string`.

Please note that this code assumes that the necessary directories (`/tmp`) already exist and that the write operations will overwrite any existing files with the same names. Feel free to adjust the file paths and handling according to your requirements.

<details><summary>Metadata</summary>

- Duration: 30129 ms
- Datetime: 2023-10-24T14:43:14.856563
- Model: gpt-3.5-turbo-0613

</details>

**Options:**
```json
{}
```

